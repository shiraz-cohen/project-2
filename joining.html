<!DOCTYPE html>
<!-- עמוד כניסת משתמש חדש. מכיל טופס "פורם" להכנסת פרטים-->

<head>
    <link rel="stylesheet" href="joining.css">
    <link rel="stylesheet" href="header_style.css">
</head>

<body onload="logIn()">
    <header>
        <p id="user"></p>

        <nav id="navigation_login">
            <a id="logIn1" href="login.html" class="button_login">כניסת משתמשים</a>
            <a id="logIn2" href="joining.html" class="button_login">להצטרפות</a>
            <a id="logOut" onclick="logOut()" href="home.html" class="hide">התנתק</a>
        </nav>

        <nav id="navigation">
            <a href="memory.html" class="button">משחקי זיכרון</a>
            <a href="speed.html" class="button">משחקי מהירות</a>
            <a href="edoucation.html" class="button">משחקים לימודיים</a>
            <a href="home.html"><img class="logo" src="image.\img-logo.png"></a>
            <a href="mind.html" class="button">משחקי חשיבה</a>
            <a href="sport.html" class="button">משחקי ספורט</a>
            <a href="young.html" class="button">משחקים לצעירים</a>
        </nav>
    </header>

    <div class="Contact-Us">
        <h1>משתמש חדש</h1>

        <form class="Contact" name="myForm" method="post" action="home.html" autocomplete="on">

            <input id="name" type="text" name="fname" placeholder="שם מלא" required>
            <br />

            <input id="password1" type="password" name="password1" placeholder="סיסמא" required>
            <br />
            <input id="password2" type="password" name="password2" placeholder="אימות סיסמא" required>
            <br />

            <button id="submit" type="submit" onclick="myFunction()">הרשמה</button>
            <br />

            <a href="login.html">יש לי חשבון,אני רוצה להתחבר</a>
        </form>
    </div>



    <script>
        var user = {
            userName: "",
            password: "",
            memoryScore: 0,
            memoryTime: [],
        };

        function myFunction() {
            let p1 = document.forms["myForm"]["password1"].value;
            let p2 = document.forms["myForm"]["password2"].value;
            let name = document.forms["myForm"]["fname"].value;

            var _user = JSON.parse(localStorage.getItem(name));
            if (_user != null) {
                alert("שם משתמש כבר קיים. בחר שם אחר");
            }

            if (p1.length < 6 /*&& p1*/) {
                alert("סיסמא צריכה להיות באורך 6 תווים לפחות");
            }
            if (p1 != "" && p2 != "" && p1 === p2) {
               /* localStorage.clear();*/
                localStorage.setItem("userNow", name);

                localStorage.setItem(name, JSON.stringify(user));
                var u = JSON.parse(localStorage.getItem(name));
                u.userName = name;
                u.password = p1;
                localStorage.setItem(name, JSON.stringify(u));
            } else {
                alert("שגיאה באימות סיסמא ");
            }
        }

    </script>
    <script src="header.js"></script>
</body>